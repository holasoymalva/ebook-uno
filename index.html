<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="src/styles/styles.css">
</head>

<body>
     <audio id="bgMusic" loop>
        <source src="src/songs/childhood.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="section" id="title-section">
        <div class="content">
            <h1 class="title">Cuando las flores cantan</h1>
            <h2 class="author">By Leon Martin</h2>
        </div>
    </div>

    <div class="story-section" id="story-section">
        <div class="story-content">
            <div class="story-text">


                <h3 class="story-title">Mecánico de corazónes</h3>
                <p class="story-paragraph">Me enamoré de un auto usado y lleno de averías. Intenté repararlo tanto como pude. Varios días me dejó morado bajo la lluvia, pero yo no me rendía. Lo llevé al taller varias veces y, muchas otras, aprendí cuanto pude para reparar los daños que sus dueños anteriores habían causado. Tenía tantos golpes que no sabía si podía sacarlos todos.</p>
                <p class="story-paragraph">Por más que lo intentaba, sentía que algo andaba mal: los asientos tenían posiciones distintas a las que yo había dejado, aparecían marcas nuevas y el kilometraje no me hacía sentido.</p>
                <p class="story-paragraph">Un día descubrí que sus antiguos dueños aún seguían teniendo llaves y solían salir a pasear con él. Un día me cansé de intentar repararlo, como quien se cansa de amar a una persona no correspondida, y lo dejé justo ahí, donde se había quedado.</p>


                <h3 class="story-title">Frente a los Baños</h3>
                <p class="story-paragraph">Cuentan los burlones del 5º B que los chicos de 3º A descubrieron un dios salido de la tierra para cumplir las mandas de quienes se portan mal. Se dice que lo encontraron detrás de las canchas, justo donde termina la iglesia y comienza la escuela, escondido entre los arbustos como un tesoro maya.</p>
                <p class="story-paragraph">Nadie lo publicó en el periódico de la escuela, pero todos sabían que se le rezaba entre recesos, en el baño. Al poco tiempo surgieron ofrendas. El olor de aquel dios se hizo notar; incluso hubo mensajes divinos: “Jorge es gay”, escrito en cursiva con caca de diferentes colores.</p>
                <p class="story-paragraph">La directora se lo atribuyó a malhechores, pero el resto de la escuela lo sabíamos todo. Los de primer año estaban poseídos por el espíritu de una niña, ya que esta madre —antes— era un cementerio.</p>
                <p class="story-paragraph">Junto con la peste se hicieron notar los milagros: algunos profes se enfermaron, se suspendieron los exámenes y tuvimos muchas clases libres. Un día, así como llegaron los milagros, se marcharon. Todos lo supimos cuando un morro se aventó de la escalera y le volaron los sesos.</p>
                <p class="story-paragraph">Llegó gente vieja, vestida de negro, y se llevaron a la directora. Como si fuera un alien, se llevaron aquel ídolo de caca en grandes bolsas negras y las subieron a una camioneta.</p>
                <p class="story-paragraph">Tras una semana sin clases, todo volvió a la normalidad. Aún se rumora que los vende dulces conservaron los dedos del dios para evitar ser atrapados, pero nada se ha confirmado.</p>
                <p class="story-paragraph">Nunca pude verlo de frente, pero sabía que estaba ahí. Se sentía su presencia en el aire cada que pasaba frente a los baños.</p>

                <h3 class="story-title">Efímera y de otra dimensión</h3>
                <p class="story-paragraph">Me intoxiqué limpiando el baño. El amoníaco tiñó mi vista de un verde alien, como si el mundo quisiera mandarme a otra dimensión. Antes de eso, estaba tirado en el sofá, sumergido en el infinito scroll. Con un vacío que olía a alcohol viejo, uno que no se llena, que intentaba tapar con vidas ajenas: perfiles que brillan un instante y se apagan antes de poder tocarlos.</p>
                <p class="story-paragraph">Entre tanta mierda digital, una isla: una biografía que decía “Cosmopolita por Japón”. No lo entendí del todo, pero algo en esa frase me atrapó. Su galería era un collage de cafés en Kioto, calles lluviosas de Tokio y playlists que tejían puentes entre Bowie, Björk y jazz japonés. Sentí que había encontrado un mensaje en una botella, flotando en el mar de selfies.</p>
                <p class="story-paragraph">Ya mareado por el amoníaco, me dejé arrastrar por la corriente. Me imaginé en una película de culto, de esas que nadie ve pero de las que todos hablan. Ella con un kimono rojo, y yo perdido en una hoodie negra. Bowie sonando de fondo. “Life on Mars?” acompañando nuestros pasos por una Shibuya donde los letreros eran en español y los semáforos titilaban como en el cine mudo.</p>
                <p class="story-paragraph">El sueño se volvió aún más raro. Ella me miraba y decía:<br>
                —¿Sabías que en Japón los sueños se guardan en cajas de cristal?<br>
                Yo respondía:<br>
                —Aquí los sueños se disuelven con amoníaco.<br>
                Reía, y su risa era un relámpago. De pronto, estábamos en un cine underground, viendo a Ozu, una vieja película de culto japonés, pero los personajes discutían sobre Bowie y cómo la música puede salvar el mundo.</p>
                <p class="story-paragraph">La película terminaba, pero el sueño no. Ella se desvanecía entre los créditos, y yo me quedaba solo, con la melodía todavía flotando. Desperté en el sofá, el teléfono en la mano. El baño seguía igual de sucio, y yo, más perdido entre lo real y lo imaginario.</p>
                <p class="story-paragraph">Una notificación me sacó del sueño: un like de ella en una foto antigua, una que ni recordaba haber subido. La realidad se me escurrió entre los dedos. El sueño volvió a empezar. Ahora, cada vez que suena Bowie, pienso en Japón, en ella, y en cómo la vida a veces se parece demasiado a una película de culto: nadie la entiende.</p>


                <h3 class="story-title">Música para Dos Hermanos</h3>
                <p class="story-paragraph">Éramos dos hermanos, pero cuando nos parábamos en el puesto de discos del tianguis, sentíamos que éramos muchos más. El mundo se hacía grande entre los estuches rayados y las bocinas colgando de un cable. Se nos olvidaba el calor y el polvo pegado a los tenis. Entre cumbias y portadas de rock, soñábamos con tener un iPod, uno de esos que solo veíamos en las manos de quienes no van a los tianguis.</p>
                <p class="story-paragraph">Vendíamos dulces. A veces chicles, a veces caramelos que se derretían antes de la hora de la comida. Guardábamos las monedas en una bolsita de tela que antes tenía arroz. Cuando la sacudíamos, sonaba bonito, como si fuera una canción. No sabíamos nada de bancos, pero sí de esperar y juntar poquito a poquito.</p>
                <p class="story-paragraph">El día que por fin juntamos el dinero, la bolsita pesaba distinto. Caminamos rápido al puesto. El iPod brillaba tanto que parecía una estrella de otro universo. Mi hermano lo agarró con las dos manos, como si fuera un tesoro pirata. Yo solo me imaginaba a mamá cantando en la cocina, pero ahora con Bowie o Los Ángeles Azules de fondo. Todo junto, como si la música pudiera arreglarlo todo.</p>
                <p class="story-paragraph">Pero mamá nos detuvo en la puerta. “Hoy es Día del Padre”, dijo. Nos pidió que le compráramos algo a papá, pero yo no quería. Vimos una chamarra azul, bonita, casi nueva. Podíamos comprarla o podíamos comprar el iPod. Dudamos, pero la voz de mamá pesó más.</p>
                <p class="story-paragraph">Papá se puso la chamarra. Sonrió, pero era esa sonrisa rara que le salía cuando iba a salir a la calle. “Voy a dar una vuelta”, dijo. Regresó tarde, borracho y sucio, con la camisa llena de besos y sin la chamarra. Nadie preguntó nada. La noche se sintió más larga y el silencio más grande.</p>
                <p class="story-paragraph">Mi hermano me miró con sus ojos grandes y tristes. No lloró. Solo me dijo bajito:<br>
                —No te enojes. Todavía podemos escuchar a mamá cantar en las noches.</p>
                <p class="story-paragraph">Y sí. Esa noche, mamá cantó una canción que no conocíamos, pero sonaba a todo lo que necesitábamos y a todo lo que teníamos.<br>
                Nos acostamos juntos en una cama vieja que crujía cada vez que nos movíamos, casi como un cartón de perro.<br>
                Cerré los ojos y la voz de mamá se mezcló con el recuerdo del iPod, el sonido de las monedas y la chamarra azul perdida.<br>
                Pensé que, a veces, la música no necesita audífonos ni aparatos bonitos. Solo hace falta un corazón que quiera escuchar.</p>


                <h3 class="story-title">Olvidé los audífonos...</h3>
                <p class="story-paragraph">En algún lugar de mi casa, olvidé mis audífonos, ¿De qué sirve tener música si no puedes disfrutarla?, estuve vulnerable a las conversaciones de la gente del metro.</p>
                <p class="story-paragraph">Hubo una que me llamó la atención. Una chica repitiéndole a un tipo que lo amaba. Ella lo miraba, él la miraba, ambos se miraban, se besaban y suspiraban.</p>
                <p class="story-paragraph">Cuando llegamos a la estación Pantitlán, ella con mucha ternura se despidió de él. Lo llenó de besos, mientras repetía que lo adoraba con un tono infantil. Me conmoví, y no lo niego, por un instante quería estar en su lugar.</p>
                <p class="story-paragraph">Al salir del vagón quede detrás de ella, bajamos las escaleras, ella llevaba una lapicera de Hello Kitty y una pequeña mochila en la que difícilmente entraba un estuche de maquillaje de color verde, aún lo recuerdo y yo, la miraba con atención, tenía unos bonitos tatuajes en sus brazos, flores y tallos que bailaban al ritmo de sus movimientos, no lo niego me hubiera gustado ser aquel chico al que tanto quería.</p>
                <p class="story-paragraph">Continuamos caminando hasta llegar al trasbordo, ella aceleró el paso, abrazo a otro chico que la esperaba en los torniquetes, se miraron tiernamente, se besaron y suspiraron, seguí caminando y me lamente por aquellos batos.</p>
                <p class="story-paragraph">Extrañaba mis audífonos, extrañaba no entrometerme en otras vidas.</p>

                <h3 class="story-title">Donde los Gatos Bailan</h3>
                <p class="story-paragraph">Había una vez un gato que no quería ser gato, de sus siete vidas solo le quedaba una, dormir y dormir, cada noche con menos ilusiones ¿Cazar? ¿Para qué cazar? ¿Maullar? ¿Para qué Maullar? ¿Qué lo hará diferente esta vez?</p>
                <p class="story-paragraph">Desilusionado, un día callo un libro del ropero, libro rojo que jamás había visto en sus siete vidas y que al llegar a verlo, se vio a sí mismo, gato pardo de ojos amarillos, ojos estrella y piel de mariposa, patitas de seda y cabello de membrillo. Y de entre las letras se vio a él vuelto humana, bailando ballet, donde los gatos bailan.</p>


                <h3 class="story-title">Canciones de Navidad</h3>
                <p class="story-paragraph">Trabajé en un lugar nefasto como camarera. Era el único trabajo que podía tomar durante las vacaciones; no tenía muchas opciones. Estaba a las afueras de la ciudad, y mayormente se vendía comida rápida. Era un sitio peculiar, sobre todo en los días festivos, como el Día de la Madre o el Día del Padre. Para ser sincera, nunca entendí cómo podía haber tantas personas a las que les agradara el lugar.</p>
                <p class="story-paragraph">El dueño era un mezquino, y un día descubrió que al poner canciones navideñas, el tiempo que las personas pasaban en el local se reducía, incrementando las ganancias.</p>
                <p class="story-paragraph">Uno de esos días, un abuelito entró al lugar. Me recordó mucho a mi papá. El señor pidió una mesa y, cada vez que me acercaba a ofrecerle algo o atenderlo, me decía que no tardarían en llegar sus hijos. Cuando llegaran, ellos sabrían qué ordenar.</p>
                <p class="story-paragraph">El tiempo transcurrió. El lugar, poco a poco, comenzó a vaciarse. Al llegar la hora del cierre, le preguntamos si se le ofrecía una taza de café, a lo cual el señor procedió a llorar y se retiró del lugar.</p>
                <p class="story-paragraph">Aquel día me sentí tan rota... Al ver a mi padre una última vez en aquel restaurante antes de morir, solo quería abrazarlo, pero tenía más mesas que atender. Solo quería abrazarlo una vez más.</p>


                <h3 class="story-title">ATM</h3>
                <p class="story-paragraph">Cuando era niño mi abuelito me contaba que en los cajeros trabajaban duendes, ahí vivían, se bañaban, trabajaban, hacían ruidos extraños y cuando se quedaban sin dinero, no daban servicio, corriendo por los túneles de la ciudad al cajero más cercano, prestándose un poco de plata, llevando sus torpes y fumando frente Perisur de 3 a 4.</p>
                <p class="story-paragraph">Siento que me estoy convirtiendo uno de ellos, no se en que momento comence a cargar topers y me converti en un duente...</p>

                <h3 class="story-title">Bitácoras de un Gato Marinero</h3>
                <p class="story-paragraph">Querida Mitchens, mi bola de estambre favorita:</p>
                <p class="story-paragraph">¡Miau-vidades desde la Patagonia! Sí, lo has leído bien. Tu amigo Bigotes, el gato que solía dormir 20 horas al lado de la ventana, ahora es todo un lobo de mar. Bueno, mejor dicho un gato de mar. Un gati-nero, si lo prefieres.</p>
                <p class="story-paragraph">¿Recuerdas aquella hermosa ave de plumaje tornasol que vimos una vez desde nuestra ventana? Pues resulta que no era una paloma con problemas de identidad como pensábamos. Era un choroy, un loro patagónico. Y yo, como el romántico empedernido que soy (culpa de las películas de Barbie y todos esos documentales de Animal Planet que veíamos juntos), decidí seguirla hasta el fin del mundo. Literalmente.</p>
                <p class="story-paragraph">Así que aquí estoy, en un barco pesquero, rodeado de humanos que huelen a pescado (el paraíso, básicamente) y con más agua a mi alrededor de la jamás quise ver en mis nueve vidas. La ironía no se me escapa: un gato que odia el agua, navegando por uno de los mares mar turbulentos del mundo. Si mis antepasados egipcios me vieran ahora, seguro me desheredarían.</p>
                <p class="story-paragraph">El capitán me ha nombrado oficial de control de roedores. Es un título elegante para decir que soy un gato caza ratones. Pero hey, un trabajo, es un trabajo, y al menos me pagan en atún fresco.</p>
                <p class="story-paragraph">Te juro, Mitchens, que este viaje me está cambiando. Ya no le temo al agua (bueno, quizás un poco). He aprendido a trepar por las redes de pesca, como solo los mejores gatos salvajes lo han hecho. Y he aprendido a predecir el clima mejor que el meteorólogo local (Que, acá entre nos, es un perro lazarillo con un pañuelo en el cuello, así que la competencia no es mucha).</p>
                <p class="story-paragraph">Pero lo más increíble de todo es la vista. Oh, Mitchens, si pudieras ver los atardeceres aquí. El cielo se pinta de colores que ni siquiera sabía que existían. A veces, cuando el sol se hunde en el horizonte, juro que puedo ver el perfil de mi amada choroy volando hacia algún lugar lejano. En esos momentos, siento que mi corazón felino se expande tanto que temo que me vaya a estallar.</p>
                <p class="story-paragraph">Sin embargo, no todo es miel sobre hojuelas (o atún sobre galletitas, en mi caso). El otro día tuvimos una tormenta tan fuerte que pensé que tendría que usar mis siete vidas restantes de una sola vez. Me aferré al mástil como si fuera el rascador más importante del mundo. Fue aterrador, pero ¿Sabes? También fue emocionante. Creo que empiezo a entender por qué los humanos buscan la aventura. </p>
                <p class="story-paragraph">A veces, en las noches tranquilas, cuando la luna se refleja en el agua como un gigantesco plato de leche celestial, me pregunto si estoy loco. ¿Quién en su sano juicio cruza medio mundo por un ave que probablemente ni sabe que existo? Pero luego recuerdo su canto, la forma en que el sol hacía brillar sus plumas, y sé que aunque nunca la alcance, este viaje vale la pena.</p>
                <p class="story-paragraph">He visto ballenas tan grandes que hacen que nuestro viejo sofá parezca una caja de arena. He jugado con delfines (desde la seguridad de la popa, claro está, no soy tan valiente todavía). Incluso vi un pingüino una vez. Me guiño un ojo, el muy coqueto. Por un momento pensé en invitarlo a cenar, pero luego recordé mi misión. Además, seguro que a la larga no funcionaria. Ya sabes, él un ave que no vuela, yo un gato de no nada… demasiados problemas de compatibilidad.</p>
                <p class="story-paragraph">No sé cuánto tiempo más durará este viaje, ni si alguna vez encontraré a mi choroy. Pero ¿Sabes? Creo que ya no importa tanto. He descubierto un mundo mucho más grande y maravilloso de lo que jamás imaginé. Cada día es una nueva aventura, cada puerto, una nueva oportunidad de dejar mi huella.</p>
                <p class="story-paragraph">Mientras tanto, seguiré navegando, soñando en plumas tornasol y preguntándome si los choroy también sueñan con gatos marineros.</p>
                <p class="story-paragraph">Te extraño, mi querida bola de estambre, Guardame un lugar cálido junto a la chimenea, por si algún día vuelvo. Aunque conociendo mi suerte, seguramente llegaré en verano.</p>
                <p class="story-paragraph">Con amor y arena para gato en las patas, <br> Bigotes, tu amigo marinero.</p>
                <br>
                <p class="story-paragraph">Muchas, muchas gracias por leer 💚 dentro de poco subire mas cuentos </p>
                <p class="story-paragraph">Atte: Malva </p>
            </div>
        </div>
    </div>

    <script>
        const leafCount = 30;
            const leaves = [];

            function createLeaves() {
                const body = document.body;
                for (let i = 0; i < leafCount; i++) {
                    const leaf = document.createElement('div');
                    leaf.className = 'leaf';
                    leaf.style.left = `${Math.random() * 100}vw`;
                    leaf.style.top = `${Math.random() * 100}vh`;
                    leaf.style.transform = `rotate(${Math.random() * 360}deg)`;
                    body.appendChild(leaf);
                    leaves.push({
                        element: leaf,
                        x: Math.random() * window.innerWidth,
                        y: Math.random() * window.innerHeight,
                        speedX: Math.random() * 2 - 1,
                        speedY: Math.random() * 2 + 1,
                        rotation: Math.random() * 360,
                        rotationSpeed: (Math.random() - 0.5) * 2
                    });
                }
            }

            function animateLeaves() {
                const documentHeight = Math.max(
                    document.body.scrollHeight,
                    document.documentElement.scrollHeight
                );
                leaves.forEach(leaf => {
                    leaf.x += leaf.speedX;
                    leaf.y += leaf.speedY;
                    leaf.rotation += leaf.rotationSpeed;
                    // Reiniciar la posición cuando la hoja sale de la vista
                    if (leaf.y > window.innerHeight + window.scrollY) {
                        leaf.y = window.scrollY - 50;
                        leaf.x = Math.random() * window.innerWidth;
                    }
                    // Si la hoja sale por los lados, reubicarla
                    if (leaf.x < -50) leaf.x = window.innerWidth;
                    if (leaf.x > window.innerWidth + 50) leaf.x = -50;
                    leaf.element.style.transform = `translate(${leaf.x}px, ${leaf.y}px) rotate(${leaf.rotation}deg)`;
                    // Ajustar la opacidad basada en la posición en la página
                    const scrollProgress = window.scrollY / (documentHeight - window.innerHeight);
                    const fadeStart = 0.8; // Punto donde comienza el fade out
                    if (scrollProgress > fadeStart) {
                        const fadeOutProgress = (scrollProgress - fadeStart) / (1 - fadeStart);
                        leaf.element.style.opacity = Math.max(0, 1 - fadeOutProgress);
                    } else {
                        leaf.element.style.opacity = 1;
                    }
                });
                requestAnimationFrame(animateLeaves);
            }

            function handleScroll() {
                const scrolled = window.scrollY;
                const windowHeight = window.innerHeight;

                // Título y autor
                const title = document.querySelector('.title');
                const author = document.querySelector('.author');
                if (scrolled < windowHeight) {
                    title.classList.add('visible');
                    author.classList.add('visible');
                    const scale = 1 + (scrolled / windowHeight) * 0.5;
                    const opacity = 1 - (scrolled / windowHeight);
                    document.querySelector('.content').style.transform = `scale(${scale}) translateZ(${scrolled}px)`;
                    title.style.opacity = opacity;
                    author.style.opacity = opacity;
                }

                // Historia y títulos de cada cuento
                const storyContent = document.querySelector('.story-content');
                const storyTitles = document.querySelectorAll('.story-title');
                const storyRect = document.querySelector('.story-section').getBoundingClientRect();

                if (storyRect.top < windowHeight * 0.8) {
                    storyContent.classList.add('visible');

                    // Iterar sobre cada título y hacerlos visibles uno por uno
                    storyTitles.forEach((storyTitle) => {
                        const rect = storyTitle.getBoundingClientRect();
                        if (rect.top < windowHeight * 0.8) {
                            storyTitle.classList.add('visible');
                        }
                    });

                    // Revelar párrafos gradualmente
                    const paragraphs = document.querySelectorAll('.story-paragraph');
                    paragraphs.forEach((paragraph, index) => {
                        const rect = paragraph.getBoundingClientRect();
                        if (rect.top < windowHeight * 0.9) {
                            setTimeout(() => {
                                paragraph.classList.add('visible');
                            }, index * 200);
                        }
                    });
                }
            }

            window.addEventListener('load', () => {
                createLeaves();
                animateLeaves();
                handleScroll();
            });
            window.addEventListener('scroll', () => {
                requestAnimationFrame(handleScroll);
            });
            window.addEventListener('resize', () => {
                leaves.forEach(leaf => {
                    leaf.x = Math.random() * window.innerWidth;
                    leaf.y = Math.random() * window.innerHeight;
                });
            });
            // Función para crear el efecto de rastro del cursor
            function createTrailEffect(e) {
                const trail = document.createElement('div');
                trail.className = 'cursor-trail';
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + window.scrollY + 'px';
                document.body.appendChild(trail);
                // Eliminar el elemento después de la animación
                setTimeout(() => {
                    trail.remove();
                }, 1000);
            }
            // Función para limitar la frecuencia de creación de efectos
            function throttle(func, limit) {
                let inThrottle;
                return function (e) {
                    if (!inThrottle) {
                        func(e);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                }
            }
            // Agregar el evento del mouse con throttle
            document.addEventListener('mousemove', throttle(createTrailEffect, 50));



            // Configuración de las flores
            const FLOWER_CONFIG = {
                count: 12, // Número total de flores a mostrar
                sizes: ['small', 'normal', 'large'], // Clases de tamaños
                baseDepth: 0.05, // Profundidad base para el efecto parallax
            };

            // Función para crear flores con parallax
            function createParallaxFlowers() {
                const flowers = [];

                for (let i = 1; i <= FLOWER_CONFIG.count; i++) {
                    const flower = document.createElement('div');
                    flower.className = 'parallax-flower';

                    // Añadir clase de tamaño aleatoria
                    const sizeClass = FLOWER_CONFIG.sizes[Math.floor(Math.random() * FLOWER_CONFIG.sizes.length)];
                    flower.classList.add(sizeClass);

                    const img = document.createElement('img');
                    // Usar la ruta correcta a las imágenes
                    const imageNumber = Math.floor(Math.random() * 4) + 1; // Asumiendo que tienes 4 imágenes
                    img.src = `src/pictures/flowers/${imageNumber}.png`;
                    img.alt = `Flower ${imageNumber}`;

                    // Configurar la posición y rotación inicial
                    flower.appendChild(img);
                    flower.style.left = `${Math.random() * 100}vw`;
                    flower.style.top = `${Math.random() * 100}vh`;

                    // Añadir una rotación inicial aleatoria
                    const initialRotation = Math.random() * 360;
                    flower.style.transform = `rotate(${initialRotation}deg) scale(${0.8 + Math.random() * 0.4})`;

                    document.body.appendChild(flower);

                    // Almacenar propiedades de movimiento
                    flowers.push({
                        element: flower,
                        depth: FLOWER_CONFIG.baseDepth * (1 + Math.random()),
                        rotationSpeed: (Math.random() - 0.5) * 0.1,
                        initialX: parseFloat(flower.style.left),
                        initialY: parseFloat(flower.style.top),
                        amplitude: {
                            x: Math.random() * 30 + 20,
                            y: Math.random() * 30 + 20
                        }
                    });
                }

                return flowers;
            }

            // Función para actualizar la posición de las flores con parallax
            function updateParallaxFlowers(flowers, mouseX, mouseY) {
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;

                flowers.forEach(flower => {
                    const rect = flower.element.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    // Calcular el movimiento basado en la posición del mouse
                    const deltaX = (mouseX - windowWidth / 2) * flower.depth;
                    const deltaY = (mouseY - windowHeight / 2) * flower.depth;

                    // Aplicar transformación con parallax y rotación suave
                    flower.element.style.transform = `
                    translate(
                        ${deltaX}px,
                        ${deltaY}px
                    )
                    rotate(${deltaY * flower.rotationSpeed}deg)
                `;
                });
            }

            // Función para manejar el scroll y actualizar la opacidad
            function handleFlowerScroll(flowers) {
                const scrollProgress = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
                const fadeStart = 0.8;

                flowers.forEach(flower => {
                    if (scrollProgress > fadeStart) {
                        const fadeOutProgress = (scrollProgress - fadeStart) / (1 - fadeStart);
                        flower.element.style.opacity = Math.max(0, 0.7 - fadeOutProgress);
                    } else {
                        flower.element.style.opacity = 0.7;
                    }
                });
            }

            // Inicialización
            document.addEventListener('DOMContentLoaded', () => {
                const flowers = createParallaxFlowers();
                let rafId = null;

                // Evento de movimiento del mouse para parallax
                document.addEventListener('mousemove', (e) => {
                    if (rafId) {
                        cancelAnimationFrame(rafId);
                    }

                    rafId = requestAnimationFrame(() => {
                        updateParallaxFlowers(flowers, e.clientX, e.clientY);
                    });
                });

                // Manejar scroll
                window.addEventListener('scroll', () => {
                    requestAnimationFrame(() => {
                        handleFlowerScroll(flowers);
                    });
                });

                // Manejar redimensionamiento de ventana
                window.addEventListener('resize', () => {
                    flowers.forEach(flower => {
                        flower.element.style.left = `${Math.random() * 100}vw`;
                        flower.element.style.top = `${Math.random() * 100}vh`;
                    });
                });

                // Resto del código existente...
                createLeaves();
                animateLeaves();
                handleScroll();
            });



            // Add minimal audio functionality
            document.addEventListener('DOMContentLoaded', () => {
                const audio = document.getElementById('bgMusic');

                // Set initial volume
                audio.volume = 0.5;

                // Handle autoplay with user interaction requirement
                const startAudio = () => {
                    audio.play().catch(() => {
                        // If autoplay was prevented, wait for user interaction
                        document.addEventListener('click', () => {
                            audio.play();
                        }, { once: true });
                    });
                };

                // Start audio when document is ready
                startAudio();
            });
    </script>
</body>

</html>
