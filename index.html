<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="src/styles/styles.css">
</head>

<body>
     <audio id="bgMusic" loop>
        <source src="src/songs/childhood.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="section" id="title-section">
        <div class="content">
            <h1 class="title">Cuando las flores cantan</h1>
            <h2 class="author">By Leon Martin</h2>
        </div>
    </div>

    <div class="story-section" id="story-section">
        <div class="story-content">
            <div class="story-text">
                <h3 class="story-title">Olvid√© los aud√≠fonos...</h3>
                <p class="story-paragraph">En alg√∫n lugar de mi casa, olvid√© mis aud√≠fonos, ¬øDe qu√© sirve tener m√∫sica si no puedes disfrutarla?, estuve vulnerable a las conversaciones de la gente del metro.</p>
                <p class="story-paragraph">Hubo una que me llam√≥ la atenci√≥n. Una chica repiti√©ndole a un tipo que lo amaba. Ella lo miraba, √©l la miraba, ambos se miraban, se besaban y suspiraban.</p>
                <p class="story-paragraph">Cuando llegamos a la estaci√≥n Pantitl√°n, ella con mucha ternura se despidi√≥ de √©l. Lo llen√≥ de besos, mientras repet√≠a que lo adoraba con un tono infantil. Me conmov√≠, y no lo niego, por un instante quer√≠a estar en su lugar.</p>
                <p class="story-paragraph">Al salir del vag√≥n quede detr√°s de ella, bajamos las escaleras, ella llevaba una lapicera de Hello Kitty y una peque√±a mochila en la que dif√≠cilmente entraba un estuche de maquillaje de color verde, a√∫n lo recuerdo y yo, la miraba con atenci√≥n, ten√≠a unos bonitos tatuajes en sus brazos, flores y tallos que bailaban al ritmo de sus movimientos, no lo niego me hubiera gustado ser aquel chico al que tanto quer√≠a.</p>
                <p class="story-paragraph">Continuamos caminando hasta llegar al trasbordo, ella aceler√≥ el paso, abrazo a otro chico que la esperaba en los torniquetes, se miraron tiernamente, se besaron y suspiraron, segu√≠ caminando y me lamente por aquellos batos.</p>
                <p class="story-paragraph">Extra√±aba mis aud√≠fonos, extra√±aba no entrometerme en otras vidas.</p>

                <h3 class="story-title">Donde los Gatos Bailan</h3>
                <p class="story-paragraph">Hab√≠a una vez un gato que no quer√≠a ser gato, de sus siete vidas solo le quedaba una, dormir y dormir, cada noche con menos ilusiones ¬øCazar? ¬øPara qu√© cazar? ¬øMaullar? ¬øPara qu√© Maullar? ¬øQu√© lo har√° diferente esta vez?</p>
                <p class="story-paragraph">Desilusionado, un d√≠a callo un libro del ropero, libro rojo que jam√°s hab√≠a visto en sus siete vidas y que al llegar a verlo, se vio a s√≠ mismo, gato pardo de ojos amarillos, ojos estrella y piel de mariposa, patitas de seda y cabello de membrillo. Y de entre las letras se vio a √©l vuelto humana, bailando ballet, donde los gatos bailan.</p>

                <h3 class="story-title">ATM</h3>
                <p class="story-paragraph">Cuando era ni√±o mi abuelito me contaba que en los cajeros trabajaban duendes, ah√≠ viv√≠an, se ba√±aban, trabajaban, hac√≠an ruidos extra√±os y cuando se quedaban sin dinero, no daban servicio, corriendo por los t√∫neles de la ciudad al cajero m√°s cercano, prest√°ndose un poco de plata, llevando sus torpes y fumando frente Perisur de 3 a 4.</p>
                <p class="story-paragraph">Siento que me estoy convirtiendo uno de ellos, no se en que momento comence a cargar topers y me converti en un duente...</p>

                <h3 class="story-title">Bit√°coras de un Gato Marinero</h3>
                <p class="story-paragraph">Querida Mitchens, mi bola de estambre favorita:</p>
                <p class="story-paragraph">¬°Miau-vidades desde la Patagonia! S√≠, lo has le√≠do bien. Tu amigo Bigotes, el gato que sol√≠a dormir 20 horas al lado de la ventana, ahora es todo un lobo de mar. Bueno, mejor dicho un gato de mar. Un gati-nero, si lo prefieres.</p>
                <p class="story-paragraph">¬øRecuerdas aquella hermosa ave de plumaje tornasol que vimos una vez desde nuestra ventana? Pues resulta que no era una paloma con problemas de identidad como pens√°bamos. Era un choroy, un loro patag√≥nico. Y yo, como el rom√°ntico empedernido que soy (culpa de las pel√≠culas de Barbie y todos esos documentales de Animal Planet que ve√≠amos juntos), decid√≠ seguirla hasta el fin del mundo. Literalmente.</p>
                <p class="story-paragraph">As√≠ que aqu√≠ estoy, en un barco pesquero, rodeado de humanos que huelen a pescado (el para√≠so, b√°sicamente) y con m√°s agua a mi alrededor de la jam√°s quise ver en mis nueve vidas. La iron√≠a no se me escapa: un gato que odia el agua, navegando por uno de los mares mar turbulentos del mundo. Si mis antepasados egipcios me vieran ahora, seguro me desheredar√≠an.</p>
                <p class="story-paragraph">El capit√°n me ha nombrado oficial de control de roedores. Es un t√≠tulo elegante para decir que soy un gato caza ratones. Pero hey, un trabajo, es un trabajo, y al menos me pagan en at√∫n fresco.</p>
                <p class="story-paragraph">Te juro, Mitchens, que este viaje me est√° cambiando. Ya no le temo al agua (bueno, quiz√°s un poco). He aprendido a trepar por las redes de pesca, como solo los mejores gatos salvajes lo han hecho. Y he aprendido a predecir el clima mejor que el meteor√≥logo local (Que, ac√° entre nos, es un perro lazarillo con un pa√±uelo en el cuello, as√≠ que la competencia no es mucha).</p>
                <p class="story-paragraph">Pero lo m√°s incre√≠ble de todo es la vista. Oh, Mitchens, si pudieras ver los atardeceres aqu√≠. El cielo se pinta de colores que ni siquiera sab√≠a que exist√≠an. A veces, cuando el sol se hunde en el horizonte, juro que puedo ver el perfil de mi amada choroy volando hacia alg√∫n lugar lejano. En esos momentos, siento que mi coraz√≥n felino se expande tanto que temo que me vaya a estallar.</p>
                <p class="story-paragraph">Sin embargo, no todo es miel sobre hojuelas (o at√∫n sobre galletitas, en mi caso). El otro d√≠a tuvimos una tormenta tan fuerte que pens√© que tendr√≠a que usar mis siete vidas restantes de una sola vez. Me aferr√© al m√°stil como si fuera el rascador m√°s importante del mundo. Fue aterrador, pero ¬øSabes? Tambi√©n fue emocionante. Creo que empiezo a entender por qu√© los humanos buscan la aventura. </p>
                <p class="story-paragraph">A veces, en las noches tranquilas, cuando la luna se refleja en el agua como un gigantesco plato de leche celestial, me pregunto si estoy loco. ¬øQui√©n en su sano juicio cruza medio mundo por un ave que probablemente ni sabe que existo? Pero luego recuerdo su canto, la forma en que el sol hac√≠a brillar sus plumas, y s√© que aunque nunca la alcance, este viaje vale la pena.</p>
                <p class="story-paragraph">He visto ballenas tan grandes que hacen que nuestro viejo sof√° parezca una caja de arena. He jugado con delfines (desde la seguridad de la popa, claro est√°, no soy tan valiente todav√≠a). Incluso vi un ping√ºino una vez. Me gui√±o un ojo, el muy coqueto. Por un momento pens√© en invitarlo a cenar, pero luego record√© mi misi√≥n. Adem√°s, seguro que a la larga no funcionaria. Ya sabes, √©l un ave que no vuela, yo un gato de no nada‚Ä¶ demasiados problemas de compatibilidad.</p>
                <p class="story-paragraph">No s√© cu√°nto tiempo m√°s durar√° este viaje, ni si alguna vez encontrar√© a mi choroy. Pero ¬øSabes? Creo que ya no importa tanto. He descubierto un mundo mucho m√°s grande y maravilloso de lo que jam√°s imagin√©. Cada d√≠a es una nueva aventura, cada puerto, una nueva oportunidad de dejar mi huella.</p>
                <p class="story-paragraph">Mientras tanto, seguir√© navegando, so√±ando en plumas tornasol y pregunt√°ndome si los choroy tambi√©n sue√±an con gatos marineros.</p>
                <p class="story-paragraph">Te extra√±o, mi querida bola de estambre, Guardame un lugar c√°lido junto a la chimenea, por si alg√∫n d√≠a vuelvo. Aunque conociendo mi suerte, seguramente llegar√© en verano.</p>
                <p class="story-paragraph">Con amor y arena para gato en las patas, <br> Bigotes, tu amigo marinero.</p>
                <br>
                <p class="story-paragraph">Muchas, muchas gracias por leer üíö dentro de poco subire mas cuentos </p>
                <p class="story-paragraph">Atte: Malva </p>
            </div>
        </div>
    </div>

    <script>
        const leafCount = 30;
            const leaves = [];

            function createLeaves() {
                const body = document.body;
                for (let i = 0; i < leafCount; i++) {
                    const leaf = document.createElement('div');
                    leaf.className = 'leaf';
                    leaf.style.left = `${Math.random() * 100}vw`;
                    leaf.style.top = `${Math.random() * 100}vh`;
                    leaf.style.transform = `rotate(${Math.random() * 360}deg)`;
                    body.appendChild(leaf);
                    leaves.push({
                        element: leaf,
                        x: Math.random() * window.innerWidth,
                        y: Math.random() * window.innerHeight,
                        speedX: Math.random() * 2 - 1,
                        speedY: Math.random() * 2 + 1,
                        rotation: Math.random() * 360,
                        rotationSpeed: (Math.random() - 0.5) * 2
                    });
                }
            }

            function animateLeaves() {
                const documentHeight = Math.max(
                    document.body.scrollHeight,
                    document.documentElement.scrollHeight
                );
                leaves.forEach(leaf => {
                    leaf.x += leaf.speedX;
                    leaf.y += leaf.speedY;
                    leaf.rotation += leaf.rotationSpeed;
                    // Reiniciar la posici√≥n cuando la hoja sale de la vista
                    if (leaf.y > window.innerHeight + window.scrollY) {
                        leaf.y = window.scrollY - 50;
                        leaf.x = Math.random() * window.innerWidth;
                    }
                    // Si la hoja sale por los lados, reubicarla
                    if (leaf.x < -50) leaf.x = window.innerWidth;
                    if (leaf.x > window.innerWidth + 50) leaf.x = -50;
                    leaf.element.style.transform = `translate(${leaf.x}px, ${leaf.y}px) rotate(${leaf.rotation}deg)`;
                    // Ajustar la opacidad basada en la posici√≥n en la p√°gina
                    const scrollProgress = window.scrollY / (documentHeight - window.innerHeight);
                    const fadeStart = 0.8; // Punto donde comienza el fade out
                    if (scrollProgress > fadeStart) {
                        const fadeOutProgress = (scrollProgress - fadeStart) / (1 - fadeStart);
                        leaf.element.style.opacity = Math.max(0, 1 - fadeOutProgress);
                    } else {
                        leaf.element.style.opacity = 1;
                    }
                });
                requestAnimationFrame(animateLeaves);
            }

            function handleScroll() {
                const scrolled = window.scrollY;
                const windowHeight = window.innerHeight;

                // T√≠tulo y autor
                const title = document.querySelector('.title');
                const author = document.querySelector('.author');
                if (scrolled < windowHeight) {
                    title.classList.add('visible');
                    author.classList.add('visible');
                    const scale = 1 + (scrolled / windowHeight) * 0.5;
                    const opacity = 1 - (scrolled / windowHeight);
                    document.querySelector('.content').style.transform = `scale(${scale}) translateZ(${scrolled}px)`;
                    title.style.opacity = opacity;
                    author.style.opacity = opacity;
                }

                // Historia y t√≠tulos de cada cuento
                const storyContent = document.querySelector('.story-content');
                const storyTitles = document.querySelectorAll('.story-title');
                const storyRect = document.querySelector('.story-section').getBoundingClientRect();

                if (storyRect.top < windowHeight * 0.8) {
                    storyContent.classList.add('visible');

                    // Iterar sobre cada t√≠tulo y hacerlos visibles uno por uno
                    storyTitles.forEach((storyTitle) => {
                        const rect = storyTitle.getBoundingClientRect();
                        if (rect.top < windowHeight * 0.8) {
                            storyTitle.classList.add('visible');
                        }
                    });

                    // Revelar p√°rrafos gradualmente
                    const paragraphs = document.querySelectorAll('.story-paragraph');
                    paragraphs.forEach((paragraph, index) => {
                        const rect = paragraph.getBoundingClientRect();
                        if (rect.top < windowHeight * 0.9) {
                            setTimeout(() => {
                                paragraph.classList.add('visible');
                            }, index * 200);
                        }
                    });
                }
            }

            window.addEventListener('load', () => {
                createLeaves();
                animateLeaves();
                handleScroll();
            });
            window.addEventListener('scroll', () => {
                requestAnimationFrame(handleScroll);
            });
            window.addEventListener('resize', () => {
                leaves.forEach(leaf => {
                    leaf.x = Math.random() * window.innerWidth;
                    leaf.y = Math.random() * window.innerHeight;
                });
            });
            // Funci√≥n para crear el efecto de rastro del cursor
            function createTrailEffect(e) {
                const trail = document.createElement('div');
                trail.className = 'cursor-trail';
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + window.scrollY + 'px';
                document.body.appendChild(trail);
                // Eliminar el elemento despu√©s de la animaci√≥n
                setTimeout(() => {
                    trail.remove();
                }, 1000);
            }
            // Funci√≥n para limitar la frecuencia de creaci√≥n de efectos
            function throttle(func, limit) {
                let inThrottle;
                return function (e) {
                    if (!inThrottle) {
                        func(e);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                }
            }
            // Agregar el evento del mouse con throttle
            document.addEventListener('mousemove', throttle(createTrailEffect, 50));



            // Configuraci√≥n de las flores
            const FLOWER_CONFIG = {
                count: 12, // N√∫mero total de flores a mostrar
                sizes: ['small', 'normal', 'large'], // Clases de tama√±os
                baseDepth: 0.05, // Profundidad base para el efecto parallax
            };

            // Funci√≥n para crear flores con parallax
            function createParallaxFlowers() {
                const flowers = [];

                for (let i = 1; i <= FLOWER_CONFIG.count; i++) {
                    const flower = document.createElement('div');
                    flower.className = 'parallax-flower';

                    // A√±adir clase de tama√±o aleatoria
                    const sizeClass = FLOWER_CONFIG.sizes[Math.floor(Math.random() * FLOWER_CONFIG.sizes.length)];
                    flower.classList.add(sizeClass);

                    const img = document.createElement('img');
                    // Usar la ruta correcta a las im√°genes
                    const imageNumber = Math.floor(Math.random() * 4) + 1; // Asumiendo que tienes 4 im√°genes
                    img.src = `src/pictures/flowers/${imageNumber}.png`;
                    img.alt = `Flower ${imageNumber}`;

                    // Configurar la posici√≥n y rotaci√≥n inicial
                    flower.appendChild(img);
                    flower.style.left = `${Math.random() * 100}vw`;
                    flower.style.top = `${Math.random() * 100}vh`;

                    // A√±adir una rotaci√≥n inicial aleatoria
                    const initialRotation = Math.random() * 360;
                    flower.style.transform = `rotate(${initialRotation}deg) scale(${0.8 + Math.random() * 0.4})`;

                    document.body.appendChild(flower);

                    // Almacenar propiedades de movimiento
                    flowers.push({
                        element: flower,
                        depth: FLOWER_CONFIG.baseDepth * (1 + Math.random()),
                        rotationSpeed: (Math.random() - 0.5) * 0.1,
                        initialX: parseFloat(flower.style.left),
                        initialY: parseFloat(flower.style.top),
                        amplitude: {
                            x: Math.random() * 30 + 20,
                            y: Math.random() * 30 + 20
                        }
                    });
                }

                return flowers;
            }

            // Funci√≥n para actualizar la posici√≥n de las flores con parallax
            function updateParallaxFlowers(flowers, mouseX, mouseY) {
                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;

                flowers.forEach(flower => {
                    const rect = flower.element.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    // Calcular el movimiento basado en la posici√≥n del mouse
                    const deltaX = (mouseX - windowWidth / 2) * flower.depth;
                    const deltaY = (mouseY - windowHeight / 2) * flower.depth;

                    // Aplicar transformaci√≥n con parallax y rotaci√≥n suave
                    flower.element.style.transform = `
                    translate(
                        ${deltaX}px,
                        ${deltaY}px
                    )
                    rotate(${deltaY * flower.rotationSpeed}deg)
                `;
                });
            }

            // Funci√≥n para manejar el scroll y actualizar la opacidad
            function handleFlowerScroll(flowers) {
                const scrollProgress = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
                const fadeStart = 0.8;

                flowers.forEach(flower => {
                    if (scrollProgress > fadeStart) {
                        const fadeOutProgress = (scrollProgress - fadeStart) / (1 - fadeStart);
                        flower.element.style.opacity = Math.max(0, 0.7 - fadeOutProgress);
                    } else {
                        flower.element.style.opacity = 0.7;
                    }
                });
            }

            // Inicializaci√≥n
            document.addEventListener('DOMContentLoaded', () => {
                const flowers = createParallaxFlowers();
                let rafId = null;

                // Evento de movimiento del mouse para parallax
                document.addEventListener('mousemove', (e) => {
                    if (rafId) {
                        cancelAnimationFrame(rafId);
                    }

                    rafId = requestAnimationFrame(() => {
                        updateParallaxFlowers(flowers, e.clientX, e.clientY);
                    });
                });

                // Manejar scroll
                window.addEventListener('scroll', () => {
                    requestAnimationFrame(() => {
                        handleFlowerScroll(flowers);
                    });
                });

                // Manejar redimensionamiento de ventana
                window.addEventListener('resize', () => {
                    flowers.forEach(flower => {
                        flower.element.style.left = `${Math.random() * 100}vw`;
                        flower.element.style.top = `${Math.random() * 100}vh`;
                    });
                });

                // Resto del c√≥digo existente...
                createLeaves();
                animateLeaves();
                handleScroll();
            });



            // Add minimal audio functionality
            document.addEventListener('DOMContentLoaded', () => {
                const audio = document.getElementById('bgMusic');

                // Set initial volume
                audio.volume = 0.5;

                // Handle autoplay with user interaction requirement
                const startAudio = () => {
                    audio.play().catch(() => {
                        // If autoplay was prevented, wait for user interaction
                        document.addEventListener('click', () => {
                            audio.play();
                        }, { once: true });
                    });
                };

                // Start audio when document is ready
                startAudio();
            });
    </script>
</body>

</html>
